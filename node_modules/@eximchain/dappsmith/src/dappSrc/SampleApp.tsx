import React, { Component } from 'react';
import { AbiDefinition } from 'ethereum-types';
import { Provider } from 'react-redux';
import { Store } from 'redux';
import { Header, TxMainPane, TxSidePane } from './components/layout';
import './fonts.css';
import './variable.css';
//@ts-ignore This isn't present right now, but it will be when the app is actually run.
import buildStore from './state';

const abi = require('./Contract.json').filter((fxn:AbiDefinition) => fxn.type === 'function');

const CONTRACT_NAME = 'WeylGovernance'

interface Props {}

interface State {
    focused : string
}

const store = buildStore({});

class App extends Component<Props, State> {
    constructor(props:any){
        super(props);
        this.setFocused = this.setFocused.bind(this);
    }

    state = {
        focused : ""
    }

    setFocused = (fxnName:string) => {
        this.setState({focused:fxnName})
    }

    render(){
        const focused = this.state.focused;
        return (
            <Provider store={store}>
                <div style={{display:'flex', flexDirection:'row', height: '100%',position: 'relative' }}>
                    <div style={{ display:'flex', height:'100%', overflow:'scroll', position: 'relative' }}>
                        <TxSidePane fxns={abi} focused={focused} setFocused={this.setFocused} />
                    </div>
                    <div style={{flexDirection:'column', padding:'2em', flex:'4', height: '100%', overflow: 'scroll'}}>
                        <Header contractName={CONTRACT_NAME} />
                        <TxMainPane fxns={abi} focused={focused} />
                    </div>
                </div>
            </Provider>
        )
    }
}

export default App;